<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>ESHEETS v5 Harness</title>
  <link rel="stylesheet" href="v5/esheets.css">
</head>
<body>
  <h1>ESHEETS v5 Harness</h1>

  <div data-esheets-warning></div>

  <div data-esheets-score="top"></div>

  <p>Legacy-style score element (simulates old worksheets):</p>
  <div class="score">Score: 0 / 12</div>

  <button id="inc">Simulate correct answer (increment score)</button>
  <button id="new">Simulate New Worksheet</button>

  <div style="margin-top:24px" data-esheets-score="bottom"></div>

  <script src="v5/esheets.js"></script>
  <script>
    ESHEETS.init({ worksheet_id: "harness-test" });

    // Attach observer to legacy score element
    ESHEETS.attachScoreObserver(document.querySelector(".score"));

    // simulate score changes
    let s = 0;
    const max = 12;
    document.getElementById("inc").addEventListener("click", () => {
      s = Math.min(max, s + 1);
      document.querySelector(".score").textContent = `Score: ${s} / ${max}`;
    });

    document.getElementById("new").addEventListener("click", () => {
      s = 0;
      document.querySelector(".score").textContent = `Score: ${s} / ${max}`;
      ESHEETS.newAttempt();
    });
  </script>
</body>
</html>
